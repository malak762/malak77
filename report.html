<!-- ...ابقى فوق نفس الكود بدون تعديل -->

<div class="form-container">
  <h2>تقديم بلاغ حريق</h2>

  <label>اختر موقع الحريق:</label><br>
  <input type="radio" name="location" value="current" onclick="getLocation()"> موقعك الحالي<br>
  <input type="radio" name="location" value="other" onclick="showLocationInput()"> موقع آخر<br>

  <div id="location-input" style="display:none;">
    <label>أدخل الموقع:</label><br>
    <input type="text" id="other-location-input" placeholder="أدخل الموقع هنا">
  </div>

  <!-- ✅ حقل رقم الهاتف الجديد -->
  <div>
    <label>رقم الهاتف للتواصل:</label><br>
    <input type="text" id="phone-number" placeholder="05XXXXXXXXX">
  </div>

  <button onclick="submitFireReport()">إرسال بلاغ الحريق</button>
</div>

<script>
  emailjs.init("k_-XPBpAVOGXECMjt"); // Public Key

  function getLocation() {
    if (navigator.geolocation) {
      navigator.geolocation.getCurrentPosition(function(position) {
        alert("موقعك الحالي: " + position.coords.latitude + ", " + position.coords.longitude);
      });
    } else {
      alert("المتصفح لا يدعم تحديد الموقع.");
    }
  }

  function showLocationInput() {
    document.getElementById("location-input").style.display = "block";
  }

  function submitFireReport() {
    const selected = document.querySelector('input[name="location"]:checked');
    const phone = document.getElementById("phone-number").value.trim();

    if (!selected) {
      alert("الرجاء اختيار الموقع.");
      return;
    }

    if (!phone) {
      alert("الرجاء إدخال رقم الهاتف.");
      return;
    }

    const type = selected.value === 'current' ? 'موقعك الحالي' : 'موقع يدوي';
    const time = new Date().toLocaleString();

    if (selected.value === 'current') {
      if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(function(position) {
          const lat = position.coords.latitude;
          const lng = position.coords.longitude;
          const coords = `${lat}, ${lng}`;
          const maplink = `https://maps.google.com/?q=${lat},${lng}`;
          sendEmail({
            type,
            location: '—',
            coords,
            maplink,
            time,
            phone
          });
        }, function() {
          alert("تعذر تحديد الموقع.");
        });
      } else {
        alert("المتصفح لا يدعم GPS.");
      }
    } else {
      const locationInput = document.getElementById("other-location-input").value.trim();
      if (!locationInput) {
        alert("الرجاء إدخال الموقع يدويًا.");
        return;
      }
      sendEmail({
        type,
        location: locationInput,
        coords: '—',
        maplink: '—',
        time,
        phone
      });
    }
  }

  function sendEmail(data) {
    emailjs.send("service_ybbx78g", "template_qkumhvs", data)
      .then(function(response) {
        alert("✅ تم إرسال البلاغ إلى البريد الإلكتروني بنجاح.");
      }, function(error) {
        alert("❌ فشل إرسال البلاغ. تأكد من الإعدادات.");
        console.error(error);
      });
  }
</script>
